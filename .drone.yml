kind: pipeline
name: lint

steps:
- name: lint
  image: imo/luarocks5.3
  pull: never
  commands:
    - luarocks install luacheck
    - luacheck gambiarra.lua
    - luacheck gambiarra_test.lua

---
kind: pipeline
name: lua5.1

steps:
- name: test
  image: imo/lua5.1:latest
  pull: never
  commands:
    - lua gambiarra_test.lua

trigger:
  status: 
    - success

depends_on: 
  - lint

---
kind: pipeline
name: lua5.2

steps:
- name: test
  image: imo/lua5.2:latest
  pull: never
  commands:
    - lua gambiarra_test.lua

trigger:
  status: 
    - success

depends_on:
  - lint

---
kind: pipeline
name: lua5.3

steps:
- name: test
  image: imo/lua5.3:latest
  pull: never
  commands:
    - lua gambiarra_test.lua

trigger:
  status:
    - success

depends_on: 
  - lint